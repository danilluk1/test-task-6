# Решение

![DB](/.github/assets/db.png)

<ul>
  <li>Для миграций выбрал go-migrate, так как это маст-хев для Golang.</li>
  <li>В качестве драйвера для бд использовал sqlc, так как он работает быстрее, чем любая ОРМ, даёт гибкость в использовании запросов, и проверяет SQL на ошибки. Правда, пока что он генерирует код только для Go и Python.</li>
  <li>Для хранения денег выбрал decimal.</li>
  <li>Использую Makefile для удобства разработки, хотя в своих проектах предпочитаю использовать Taskfile.</li>
  <li>Для RestAPI использовал нативный http, без фреймворков, используя chi в качестве роутера. Так как считаю, этот метод наиболее показательным для тестового задания.</li>
  <li>Написал интерфейс логера, чтобы потом его подменить например на zap</li>
  <li>Для разворачивания приложения использую docker</li>
</ul>

# REST

[Postman Workspace](https://www.postman.com/spacecraft-geoscientist-12695557/workspace/test-task-6)

<ul>
  <li>Логика по добавлению, удалению, выводу магазинов и их категорий в соответствии с ТЗ</li>
  <li>Логика по добавлению, удалению, выводу продуктов и их категорий в соответствии с ТЗ</li>
  <li>В рамках задачи не указано, как связаны продукты и магазины, поэтому они никак не связаны</li>
  <li>Добавил пагинацию в вывод всех массивов</li>
  <li>Созданы простые индексы в базе</li>
</ul>

## Что не сделано, хотя стоило бы

<ul>
  <li>Тесты. Они здесь были бы очень важны, так как используются 2 транзакции с внешними ключами, что потенциально приводит к дедлокам, поэтому к ним нужны тесты, + чтобы каждый раз не создавать руками в постмане категории + магазины к ним)</li>
  <li>Валидация ссылок внутри массива. Но я не хочу писать кастомный валидатор для go-validator</li>
  <li>Добавить авторизацию, чтобы сторонние магаизны не могли использовать категории других магазинов</li>
  <li>Добавить к выводу всех продуктов полное описание категорий, а не их id, что легко делается через JOIN</li>
</ul>

# Запуск

```shell
docker compose up
```
